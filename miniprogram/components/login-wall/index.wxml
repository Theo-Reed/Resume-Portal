<view class="login-wall {{visible ? 'visible' : ''}}" catchtouchmove="preventTouch">
  <!-- Shared Background: Starts White, Fades out on Success or Login -->
  <view class="glass-mask {{internalPhase === 'hidden' || internalPhase === 'login' ? 'fade-out' : ''}}"></view>

  <!-- Shared Animated Globe -->
  <view class="shared-globe {{internalPhase}}">
    <view class="globe-water"></view>
    <view class="globe-land"></view>
    <view class="globe-shine"></view>
  </view>
  
  <!-- Phase 1: Splash Content (Visual Purity) -->
  <view class="splash-content {{internalPhase !== 'splash' ? 'fade-out' : ''}}"></view>

  <!-- Phase 2: Login Card -->
  <!-- Note: The logo here is a placeholder space to ensure alignment -->
  <view class="login-card {{internalPhase === 'login' ? 'show' : ''}}">
    <view class="card-header">
      <!-- Empty space for the moving logo to land in -->
      <view class="logo-placeholder"></view>
      <view class="title-group">
        <text class="main-title">{{ type === 'login' ? '欢迎回来' : '立即注册' }}</text>
        <text class="sub-title">精选全球远程机会</text>
      </view>
    </view>


    <!-- 动态状态提示 Banner -->
    <view class="status-banner {{bootStatus === 'no-network' || bootStatus === 'server-down' ? 'active' : ''}}">
      <view class="banner-content">
        <text class="banner-icon">{{ bootStatus === 'no-network' ? '📶' : '⚙️' }}</text>
        <text class="banner-text">{{ bootStatus === 'no-network' ? '网络不可用，请检查设置' : '服务器维护中，正在尝试连接...' }}</text>
      </view>
    </view>

    <view class="tab-switcher">
      <view class="tab-item {{type === 'login' ? 'active' : ''}}" bindtap="switchType" data-type="login">登录</view>
      <view class="tab-item {{type === 'register' ? 'active' : ''}}" bindtap="switchType" data-type="register">注册</view>
    </view>

    <view class="input-form">
      <view class="input-row">
        <input class="f-input" type="number" placeholder="手机号" model:value="{{phone}}" placeholder-style="color: #cbd5e1" />
      </view>
      <view class="input-row">
        <input class="f-input" type="password" placeholder="密码" model:value="{{password}}" placeholder-style="color: #cbd5e1" />
      </view>
      
      <button class="primary-btn" bindtap="handleSubmit" hover-class="btn-hover">
        {{ type === 'login' ? '登 录' : '注 册' }}
      </button>
    </view>

    <view class="card-footer">
      <text class="protocol">登录即视为同意《用户协议》与《隐私政策》</text>
    </view>
  </view>
</view>
